本笔记用于记录nng学习过程中遇到的各种问题及检修方法



## 最小系统

#### 晶振不起振

##### 现象分析

stlink连结核心板，烧录时检测不到板子，no target ，检查keil设置没有问题，万用表测电源正常，测量晶振电压，发现只有0.2~0.5V的电压，晶振没有起振。

##### 故障排查

首先需要知道的是，无源晶振需要匹配负载电容，但负载电容误差几个pf并不会影响晶振是否起振，也就是说，负载电容的设计有一个容忍范围，在此范围内晶振都可以起振，区别在于晶振的震荡频率会有偏差，负载电容的增加通常会导致谐振频率的降低，而减少则会导致频率的提高，当然过大或过小的负载电容可能导致起振时间延长或是不稳定的振荡。

回到话题，晶振不起振，推荐按照以下顺序检修

1. 考虑焊接，是否有虚焊。MCU正常来说，只要vcc gnd swdio swclk这四个脚正常连接，上电成功，原理图设计没有错误，晶振就能起振，判断起振的现象为上电晶振两脚就有1.4V以上的电压。如果电源指示灯亮，说明vcc 和gnd 没有问题，考虑swdio swclk没有正常连接，用万用表蜂鸣档测量mcu这两个脚是否和烧录口导通。没有通则为虚焊，重新焊接即可。
2. 考虑元件损坏。用蜂鸣档测mcu附近的电容尤其是晶振及其负载电容有没有导通，有没有短路，没有导通则用欧姆档测量晶振两端，正常为M$$\ohm$$以上。可以参考网上晶振检测电路自己打一块板来检查晶振好坏。另外注意晶振的焊接温度，长时间超过手册规定温度可能损坏晶振内部。如有示波器可以用示波器查看晶振波形
3. 考虑芯片损坏。参考原理图检查芯片引脚是否被击穿，上电是否异常发热，各引脚是否为其手册给出的参考电压。使用相应的开发工具（如ST-Link Utility）尝试读取芯片的ID或信息。
4. 分析原理图设计是否合理
5. 用新器件重新焊接一块板子